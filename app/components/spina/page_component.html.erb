<li data-id="<%= @page.id %>">
  <div class="flex items-center border-gray-200 border-b pl-<%= depth * 5 %> bg-gray-<%= depth * 100 %> bg-opacity-50">
    <div data-sortable-handle class="p-4 text-gray-300 hover:text-gray-600 cursor-move">
      <svg class="w-4 h-4 -mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><path d="M496 288H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-128H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16z"/></svg>
    </div>
    <%= link_to helpers.spina.edit_admin_page_path(@page), class: "block text-spina font-medium text-sm p-4 hover:text-spina-dark" do %>
      <%= @page.menu_title %>

      <% if @page.draft? %>
        <small class="font-normal">(<%=t 'spina.pages.concept' %>)</small>
      <% elsif !@page.show_in_menu? %>
        <small class="font-normal">(<%=t 'spina.pages.show_in_menu' %>)</small>
      <% end %>

      <% if @page.skip_to_first_child %>
        <small class="font-normal">(<%=t 'spina.pages.skip_to_first_child' %>)</small>
      <% end %>

    <% end %>
    <div class='flex-1'></div>
    <div class="mr-3 flex">
      <% if Spina.config.locales.many? %>
        <div class="relative" data-controller="reveal" data-reveal-away>
          <button type="button" class="btn px-2 text-xs h-7" data-action="reveal#toggle">
            <svg class="w-4 h-4 text-gray-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
            </svg>
            <% if missing_locales.any? %>
              <span class="ml-1 flex items-center">
                Missing translations
                <div class="bg-orange-400 rounded text-white leading-4 ml-2 w-4 font-medium text-center text-xs">
                  <%= missing_locales.size %>
                </div>
              </span>
            <% end %>
          </button>

          <div hidden data-reveal data-transition class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg border border-gray-200 z-10">
            <div class="rounded-md bg-white shadow-xs">
              <div class="py-1">
                <% if missing_locales.any? %>
                  <% missing_locales.each do |locale| %>
                    <%= link_to helpers.spina.edit_admin_page_path(@page, locale: locale), class: "block px-3 py-2 text-xs leading-4 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" do %>
                      <div class="text-orange-400">Add <span class="font-semibold"><%=t "spina.languages.#{locale}" %></span> translation</div>
                    <% end %>
                  <% end %>
                  <div class="border-b border-gray-200 my-1"></div>
                <% end %>

                <% existing_locales.each do |locale| %>
                  <%= link_to helpers.spina.edit_admin_page_path(@page, locale: locale), class: "block px-3 py-2 text-xs leading-4 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" do %>
                    <div class="text-gray-700">Edit <span class="font-semibold"><%=t "spina.languages.#{locale}" %></span> translation</div>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

  </div>

  <% if children.any? %>
    <%= render Spina::PageListComponent.new(pages: children, depth: depth + 1) %>
  <% end %>
</li>