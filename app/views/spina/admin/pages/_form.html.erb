<%= form_with model: @page, url: (@page.new_record? ? spina.admin_pages_path : spina.admin_page_path(@page)), data: {controller: "notifications tabs", action: "ajax:error->notifications#setError", tabs_active: "cursor-default mx-4 text-gray-800 border-spina", tabs_inactive: "cursor-pointer px-4 text-gray-400 border-transparent"} do |f| %>
  <%= f.hidden_field :view_template %>

  <div class="bg-white border-b border-gray-200 p-6 pl-8 sticky top-0 relative z-20">
    <div class="flex justify-between items-center">
      <div class="text-2xl font-normal text-gray-800 flex items-center">
        <%= link_to 'Pages', spina.admin_pages_path, class: 'text-gray-400' %>
        <svg class="w-5 h-5 mx-2 text-gray-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
        </svg>
        <%= @page.menu_title || t("spina.pages.new") %>
      </div>

      <div class="flex items-center">
        <button type="submit" class="btn pl-2 ml-3">
          <svg class="w-5 h-5 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
          </svg>
          <% if @page.draft? %>
            Save draft
          <% else %>
            Save changes
          <% end %>
        </button>

        <% if @page.persisted? && @page.draft? %>
          <button type="submit" name="page[draft]" value="false" class="btn btn-primary ml-3 pl-3">
            <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clip-rule="evenodd" />
            </svg>
            Publish page
          </button>
        <% end %>
      </div>
    </div>

    <nav class="-ml-4 -mb-6 mt-2">
      <ul class="flex">
        <button type="button" class="px-4 border-b-4 border-transparent block leading-loose hover:text-gray-800 text-gray-400 font-bold text-xs uppercase" data-action="tabs#show" data-target="tabs.button" data-pane-id="page_content">
          Page content
        </button>
        <button type="button" class="px-4 border-b-4 border-transparent block leading-loose hover:text-gray-800 text-gray-400 font-bold text-xs uppercase" data-action="tabs#show" data-target="tabs.button" data-pane-id="seo">
          SEO
        </button>
        <button type="button" class="px-4 border-b-4 border-transparent block leading-loose hover:text-gray-800 text-gray-400 font-bold text-xs uppercase" data-action="tabs#show" data-target="tabs.button" data-pane-id="advanced">
          Advanced
        </button>
      </ul>
    </nav>
  </div>

  <div class="p-8">
    <div data-target="notifications.list"></div>
    <div data-target="tabs.pane" id="page_content">
      <%= render partial: 'form_page_content', locals: {f: f} %>
    </div>

    <div data-target="tabs.pane" id="seo">
      <%= render partial: 'form_seo', locals: {f: f} %>
    </div>

    <div data-target="tabs.pane" id="advanced">
      <%= render partial: 'form_advanced', locals: {f: f} %>
    </div>
  </div>
<% end %>