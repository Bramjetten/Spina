.page-form-label= f.object.title
.page-form-control
  = f.fields_for :partable, f.object.partable do |ff|
    = ff.hidden_field :image_tokens, id: "media_picker_#{ff.object.object_id}", value: ff.object.image_ids.join(",")
    = ff.hidden_field :image_positions, value: ff.object.images.sorted_by_image_collection.pluck(:image_id).join(",")

    .page-form-media-picker
      = link_to admin_media_picker_path(selected_ids: ff.object.image_ids, hidden_field_id: "media_picker_#{ff.object.object_id}", multiple: true, placeholder_id: "media_picker_placeholder_#{f.object.object_id}"), remote: true, class: 'images' do
        .page-form-media-picker-placeholder=t "spina.images.choose"

        %div{id: "media_picker_placeholder_#{f.object.object_id}"}
          - ff.object.images.sorted_by_image_collection.each do |image|
            = image_tag thumbnail_url(image)

      = button_tag type: :default, class: 'button button-small button-white', data: {action: "image-form#remove"} do
        %i.icon.icon-cross{style: "margin: 0; font-size: 10px"}